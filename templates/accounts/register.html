{% extends 'base.html' %}
{% load i18n %}

{% block content %}
<div class="row justify-content-center py-5">
    <div class="col-md-8 col-lg-7">
        <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
            <div class="card-header bg-success text-white py-4 text-center border-0"
                 style="background: linear-gradient(45deg, #198754, #1ea362);">
                <h3 class="fw-bold mb-0">{% trans "Member Registration" %}</h3>
                <p class="small mb-0 opacity-75">{% trans "Join the JIBWIS Digital Management System" %}</p>
            </div>

            <div class="card-body p-4 p-md-5">
                <form method="post" class="needs-validation" id="registrationForm" novalidate>
                    {% csrf_token %}

                    <h5 class="text-success fw-bold mb-3 d-flex align-items-center">
                        <span class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center me-2" style="width:28px; height:28px; font-size: 0.8rem;">1</span>
                        {% trans "Account Information" %}
                    </h5>
                    <div class="row g-3">
                        {% for field in user_form %}
                            {# Exclude bank fields from rendering #}
                            {% if field.name != 'bank_code' and field.name != 'account_number' and field.name != 'account_name' %}
                            <div class="col-md-6 mb-3">
                                <label class="form-label small fw-bold text-dark">{{ field.label }}</label>
                                <div class="django-field-wrapper">{{ field }}</div>
                                {% if field.errors %}<div class="text-danger extra-small">{{ field.errors }}</div>{% endif %}
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>

                    <hr class="my-4 opacity-25">

                    <h5 class="text-success fw-bold mb-3 d-flex align-items-center">
                        <span class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center me-2" style="width:28px; height:28px; font-size: 0.8rem;">2</span>
                        {% trans "Organizational Role" %}
                    </h5>
                    <div class="row g-3">
                        {% for field in profile_form %}
                        <div class="col-md-12 mb-3">
                            <label class="form-label small fw-bold text-dark">{{ field.label }}</label>
                            <div class="django-field-wrapper">{{ field }}</div>
                            {% if field.errors %}<div class="text-danger extra-small">{{ field.errors }}</div>{% endif %}
                        </div>
                        {% endfor %}
                    </div>

                    <div class="d-grid gap-2 mt-5">
                        <button type="submit" id="submitBtn" class="btn btn-success btn-lg fw-bold shadow-sm py-3 rounded-pill">
                            {% trans "Submit Membership Request" %}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    .django-field-wrapper input, .django-field-wrapper select {
        display: block !important; width: 100% !important; padding: 0.75rem 1rem !important;
        border: 1px solid #dee2e6 !important; border-radius: 0.6rem !important; background-color: #f8f9fa !important;
    }
    .django-field-wrapper input:focus { border-color: #198754 !important; background-color: #fff !important; outline: none !important; box-shadow: 0 0 0 0.25rem rgba(25,135,84,0.1) !important;}
    .extra-small { font-size: 0.75rem; }
</style>
{% endblock %}